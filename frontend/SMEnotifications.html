<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Notifications - SME Notifications</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="basedashboard.css" />
    <link rel="stylesheet" href="basenotifications.css" />

    <!-- Icons & Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <img src="logo.png" alt="logo" />
            <h2>SME</h2>
        </div>

        <ul class="sidebar-links">
            <h4><span>Main Menu</span><div class="menu-separator"></div></h4>
            <li><a href="SMEdashboard.html"><span class="material-symbols-outlined">dashboard</span>Dashboard</a></li>
            <li><a href="SMEtrainees.html"><span class="material-symbols-outlined">groups</span>Trainees</a></li>

            <h4><span>Training Materials</span><div class="menu-separator"></div></h4>
            <li><a href="SMEcourses.html"><span class="material-symbols-outlined">school</span>Courses</a></li>
            <li><a href="SMEassessment.html"><span class="material-symbols-outlined">quiz</span>Assessments</a></li>

            <h4><span>Account</span><div class="menu-separator"></div></h4>
            <li><a href="settingsSME.html"><span class="material-symbols-outlined">settings</span>Settings</a></li>
            <li><a href="mainlayout.html"><span class="material-symbols-outlined">logout</span>Logout</a></li>
        </ul>

        <div class="user-account">
            <div class="user-profile">
                <img src="profile.png" alt="Profile Image" />
                <div class="user-detail">
                    <h3>Eva Murphy</h3>
                    <span>SME</span>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main content -->
    <main class="main">
        <section class="notifications-container">
            <header class="notifications-header">
                <h1 class="notifications-title">Notifications</h1>
                <div class="notifications-actions">
                    <button id="selectAllBtn">Select All</button>
                    <button id="markReadBtn">Mark as Read</button>
                    <button id="markUnreadBtn">Mark as Unread</button>
                    <button id="clearSelectedBtn">Clear Selected</button>
                </div>
            </header>

            <div class="notifications-list" id="notificationsList"></div>
        </section>
    </main>

    <script>
        async function fetchNotifications() {
            // Temporary static data
            return [
                { id: 1, type: "assignment", icon: "ðŸ“", title: "New Assignment Posted", message: "REST API Design Assignment posted. Due: Oct 17, 2025.", course: "RESTful API Design", time: "2 hours ago", isRead: false },
                { id: 2, type: "quiz", icon: "ðŸ“Š", title: "Quiz Reminder", message: "GraphQL Queries quiz due tomorrow.", course: "Building GraphQL APIs", time: "4 hours ago", isRead: false },
                { id: 3, type: "announcement", icon: "ðŸ“¢", title: "Course Update", message: "API Testing course updated with new examples.", course: "API Testing & Documentation", time: "2 days ago", isRead: true }
            ];
        }

        let notifications = [];
        let selectedNotifications = new Set();

        async function initNotifications() {
            notifications = await fetchNotifications();
            renderNotifications();
        }

        function renderNotifications() {
            const container = document.getElementById("notificationsList");
            container.innerHTML = "";

            notifications.forEach((n) => {
                const item = document.createElement("div");
                item.className = `notification-item ${!n.isRead ? "unread" : ""} ${selectedNotifications.has(n.id) ? "selected" : ""}`;
                item.innerHTML = `
              <input type="checkbox" class="notification-checkbox" ${selectedNotifications.has(n.id) ? "checked" : ""} onchange="toggleSelection(${n.id})">
              <div class="notification-icon ${n.type}">${n.icon}</div>
              <div class="notification-content">
                <h3 class="notification-title">${n.title}</h3>
                <p class="notification-message">${n.message}</p>
                <div class="notification-meta">
                  <span class="notification-course">${n.course}</span>
                  <span class="notification-time">${n.time}</span>
                </div>
              </div>
              ${!n.isRead ? '<span class="unread-badge"></span>' : ""}
            `;
                container.appendChild(item);
            });
        }

        function toggleSelection(id) {
            if (selectedNotifications.has(id)) selectedNotifications.delete(id);
            else selectedNotifications.add(id);
            renderNotifications();
        }

        document.getElementById("selectAllBtn").onclick = () => {
            if (selectedNotifications.size === notifications.length) selectedNotifications.clear();
            else notifications.forEach(n => selectedNotifications.add(n.id));
            renderNotifications();
        };

        document.getElementById("markReadBtn").onclick = () => {
            notifications.forEach(n => { if (selectedNotifications.has(n.id)) n.isRead = true; });
            selectedNotifications.clear(); renderNotifications();
        };

        document.getElementById("markUnreadBtn").onclick = () => {
            notifications.forEach(n => { if (selectedNotifications.has(n.id)) n.isRead = false; });
            selectedNotifications.clear(); renderNotifications();
        };

        document.getElementById("clearSelectedBtn").onclick = () => {
            selectedNotifications.clear(); renderNotifications();
        };

        initNotifications();
    </script>
</body>
</html>
